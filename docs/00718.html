<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<html>
<head>
<title>USB_DEVICE_CDC_SerialStateNotificationSend Function</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoadEx('frames.html', 'topic', '00718.html');" onmousedown="onBodyMouseDown();">

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="00369.html" target="topic">USB Libraries Help</a> &gt; <a href="00260.html" target="topic">USB Device Libraries</a> &gt; <a href="00258.html" target="topic">USB CDC Device Library</a> &gt; <a href="00254.html" target="topic">Library Interface</a> &gt; a) Functions &gt; <a href="00718.html" target="topic">USB_DEVICE_CDC_SerialStateNotificationSend Function</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony USB Stack </div>
</td><td width="25%">
<div class="Element2">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00234.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="00724.html" target="topic">Previous</a> | <a href="00254.html" target="topic">Up</a> | <a href="00679.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: USB_DEVICE_CDC_SerialStateNotificationSend@USB_DEVICE_CDC_INDEX@USB_DEVICE_CDC_TRANSFER_HANDLE *@USB_CDC_SERIAL_STATE * Topic Title: USB_DEVICE_CDC_SerialStateNotificationSend Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table><div class="Element5">
USB_DEVICE_CDC_SerialStateNotificationSend Function</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<a name="PageContent"></a><div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
This function places a request to send serial state notification data to the host. The function will place the request with the driver, the request will get serviced when the data is requested by the USB host. A handle to the request is returned in the transferHandle parameter. The termination of the request is indicated by the USB_DEVICE_CDC_EVENT_SERIAL_STATE_NOTIFICATION_COMPLETE event. The amount of data transmitted and the transfer handle associated with the request is returned along with the event in the serialStateNotificationCompleteData member of pData parameter of the event handler. The transfer handle expires when the event handler for the USB_DEVICE_CDC_EVENT_SERIAL_STATE_NOTIFICATION_COMPLETE event exits. If the send request could not be accepted, the function returns an error code and transferHandle will contain the value <a href="00723.html" target="topic">USB_DEVICE_CDC_TRANSFER_HANDLE_INVALID</a>.</p></div>
</div>
<a name="43"></a><div class="Element99">
C</div>
<div class="Element101"><div class="Element100"><pre class="Element100"><a href="00708.html" target="topic">USB_DEVICE_CDC_RESULT</a> <strong><span style="color: #000000">USB_DEVICE_CDC_SerialStateNotificationSend</span></strong>(
    <a href="00692.html" target="topic">USB_DEVICE_CDC_INDEX</a> <strong><span style="color: #000000">instanceIndex</span></strong>, 
    <a href="00722.html" target="topic">USB_DEVICE_CDC_TRANSFER_HANDLE</a> * <strong><span style="color: #000000">transferHandle</span></strong>, 
    USB_CDC_SERIAL_STATE * <strong><span style="color: #000000">notificationData</span></strong>
);</pre></div></div>
<a name="507265636F6E646974696F6E73"></a><div class="Element14">
Preconditions</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
The function driver should have been configured</p></div>
</div>
<a name="506172616D6574657273"></a><div class="Element14">
Parameters</div>
<div class="Element11">
<div class="Element10">
<div class="Element312">
<div class="TableDiv">
<table cellspacing="0" class="Table3">
<tr>
<td class="Element300" valign="top" width="35%">
<div class="Element301">
Parameters&nbsp;</div></td><td class="Element304" valign="top" width="65%">
<div class="Element305">
Description&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
instance&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
USB Device CDC Function Driver instance.<br>&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
transferHandle&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Pointer to a output only variable that will contain transfer handle.<br>&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
notificationData&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
USB_DEVICE_CDC_SERIAL_STATE_NOTIFICATION type of notification data to be sent to the host.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
<a name="52657475726E73"></a><div class="Element14">
Returns</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
USB_DEVICE_CDC_RESULT_OK - The request was successful. transferHandle contains a valid transfer handle.&nbsp;</p>
<p class="Element10">
USB_DEVICE_CDC_RESULT_ERROR_TRANSFER_QUEUE_FULL - Internal request queue is full. The request could not be added.&nbsp;</p>
<p class="Element10">
USB_DEVICE_CDC_RESULT_ERROR_INSTANCE_NOT_CONFIGURED - The specified instance is not configured yet.&nbsp;</p>
<p class="Element10">
USB_DEVICE_CDC_RESULT_ERROR_INSTANCE_INVALID - The specified instance was not provisioned in the application and is invalid.</p></div>
</div>
<a name="52656D61726B73"></a><div class="Element14">
Remarks</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
While the using the CDC Function Driver with the PIC32MZ USB module, the notification data buffer provided to the USB_DEVICE_CDC_SerialStateNotificationSend function should be placed in coherent memory and aligned at a 16 byte boundary. This can be done by declaring the buffer using the __attribute__((coherent, aligned(16))) attribute. An example is shown here&nbsp;</p>
<p class="Element10">
&nbsp;</p><div class="Element13"><div class="Element12"><pre class="Element12">uint8_t data[256] __attribute__((coherent, aligned(16)));</pre></div></div>
</div>
</div>
<a name="4578616D706C65"></a><div class="Element14">
Example</div>
<div class="Element11">
<div class="Element10">
<div class="Element13"><div class="Element12"><pre class="Element12">
USB_CDC_SERIAL_STATE notificationData;

<i><span style="color: #008000">// This application function could possibly update the notificationData</span></i>
<i><span style="color: #008000">// data structure.</span></i>

APP_UpdateNotificationData(&amp;notificationData);

<i><span style="color: #008000">// Now send the updated notification data to the host.</span></i>

result = USB_DEVICE_CDC_SerialStateNotificationSend
            (instanceIndex, &amp;transferHandle, &amp;notificationData);

<strong><span style="color: #000080">if</span></strong>(USB_DEVICE_CDC_RESULT_OK != result)
{
    <i><span style="color: #008000">// Error handling here. The transferHandle will contain</span></i>
    <i><span style="color: #008000">// USB_DEVICE_CDC_TRANSFER_HANDLE_INVALID in this case.</span></i>
} 
</pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="00369.html" target="topic">USB Libraries Help</a> &gt; <a href="00260.html" target="topic">USB Device Libraries</a> &gt; <a href="00258.html" target="topic">USB CDC Device Library</a> &gt; <a href="00254.html" target="topic">Library Interface</a> &gt; a) Functions &gt; <a href="00718.html" target="topic">USB_DEVICE_CDC_SerialStateNotificationSend Function</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element3">
MPLAB Harmony USB Stack </div>
</td><td width="25%">
<div class="Element4">
<a href="contents.html" target="tocidx">Contents</a> | <a href="00234.html" target="topic">Home</a></div>
</td><td width="25%">
<div class="Element91">
<a href="00724.html" target="topic">Previous</a> | <a href="00254.html" target="topic">Up</a> | <a href="00679.html" target="topic">Next</a></div>
</td><td width="25%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: USB_DEVICE_CDC_SerialStateNotificationSend@USB_DEVICE_CDC_INDEX@USB_DEVICE_CDC_TRANSFER_HANDLE *@USB_CDC_SERIAL_STATE * Topic Title: USB_DEVICE_CDC_SerialStateNotificationSend Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com" target="_blank">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>